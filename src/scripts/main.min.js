var url=location.href;if(-1!=url.indexOf("?")){var source="",ary=url.split("?")[1].split("&");for(i=0;i<=ary.length-1;i++)"stream"==ary[i].split("=")[0]&&(source=ary[i].split("=")[1]),"title"==ary[i].split("=")[0]&&(title=ary[i].split("=")[1],document.querySelector("h2.radio-title").innerText=decodeURI(title)),"format"==ary[i].split("=")[0]&&(format=ary[i].split("=")[1]),"img"==ary[i].split("=")[0]&&(img=ary[i].split("=")[1],document.querySelector("#radio-img").setAttribute("src","https://diantai.yuslife.cc"+img)),"frequency"==ary[i].split("=")[0]&&(frequency=ary[i].split("=")[1],document.querySelector(".fm").innerText=decodeURI(frequency))}const video=document.querySelector("#player"),player=new Plyr(video,{captions:{active:!0,update:!0,language:"en"},controls:["play"],tooltips:{controls:!0,seek:!0},i18n:{play:"播放",pause:"暫停"}});if("hls"==format){const hls=new Hls;hls.loadSource(source),hls.attachMedia(video),window.hls=hls,player.on("languagechange",()=>{setTimeout(()=>hls.subtitleTrack=player.currentTrack,50)})}else video.src=source;function openWindow(item){"Countdown"===item&&$("#forCountdown").removeClass("hidden")}function closeWindow(item){"Countdown"===item&&$("#forCountdown").addClass("hidden")}function toPlay(){navigator.mediaSession.metadata=new MediaMetadata({title:decodeURI(title),artist:"DianTai 廣播線上聽",album:"DianTai 廣播線上聽",artwork:[{src:"https://diantai.yuslife.cc"+img,sizes:"300x300",type:"image/jpeg"}]}),document.querySelector(".pause").classList.remove("btn-hidden"),document.querySelector(".play").classList.add("btn-hidden"),document.querySelector(".radio img").classList.add("plus-img"),player.play()}function toPause(){AudioScheduledSourceNode.stop,player.pause(),document.querySelector(".pause").classList.add("btn-hidden"),document.querySelector(".play").classList.remove("btn-hidden"),document.querySelector(".radio img").classList.remove("plus-img")}function toMuted(){player.muted=!0,document.querySelector(".volume_off").classList.add("btn-hidden"),document.querySelector(".volume_up").classList.remove("btn-hidden")}function tonoMuted(){player.muted=!1,document.querySelector(".volume_off").classList.remove("btn-hidden"),document.querySelector(".volume_up").classList.add("btn-hidden")}function timeToSleep(){const times=$("#forCountdown > ul > li > input:checked").val(),dayToset=Date.now()+Number(times);$("#forCountdown p").countdown(dayToset).on("update.countdown",(function(event){var format="%M 分 %S 秒";$(this).html("廣播將於 "+event.strftime(format)+" 後停止")})).on("finish.countdown",(function(event){$(this).html("請選擇時間"),toPause()}))}